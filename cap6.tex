\chapter{Validación}

Para validar la mejora en los tiempos y resultados efectuados se debe contrastar la ejecución del recuento de UD's para un grupo de alumnos con sus respectivas carreras inscritas. Para ello se poseen los datos de todos los estudiantes egresados y activos al año 2015.

Aun así, debido a cuando se implementó la versión anterior y la carga de datos paulatina que se ha hecho, existen datos incompletos para una parte de los alumnos antiguos. Es por ello que, para chequear el real cumplimiento de todos los elementos hablados en esta memoria, se ocuparan solo los alumnos inscritos en las versiones mas actualizadas de cada carrera.

Lo anterior implica el calculo del recuento de unidades docentes de aproximadamente 4300 alumnos divididos en 12 planes distintos. Para este calculo se realizó un script que desde la base datos obtuviera todos los alumnos anteriormente descritos para luego, dividiendolos por carrera, ejecutar el algoritmo. Finalmente, se creo un archivo con el resultado de cada una de las carreras.

\begin{table}[!h]
	\centering
	\begin{tabular}{|c|c|}
		\hline
		\textbf{Código} & \textbf{Nombre} \\\hline\hline
		6 & Geología\\\hline
		10 & Ingeniería Civil, Mencion Estructuras y Construcción\\\hline
		11 & Ingeniería Civil, Mención Transporte\\\hline
		14 & Ingeniería Civil, Mención Ingeniería Hidráulica, Sanitaria y Ambiental\\\hline
		15 & Ingeniería Civil Eléctrica\\\hline
		16 & Ingeniería Civil Industrial\\\hline
		17 & Ingeniería Civil Matemática\\\hline
		18 & Ingeniería Civil Mecánica\\\hline
		22 & Ingeniería Civil de Minas\\\hline
		25 & Ingeniería Civil Química\\\hline
		41 & Ingeniería Civil en Computación\\\hline
		124 & Ingeniería Civil en Biotecnología\\\hline
	\end{tabular}
	\caption{Tabla con los códigos de carrera y sus respectivos nombres.}
	\label{tabla:1}
\end{table}

El procedimiento se realizó tanto como para el algoritmo antiguo como para el nuevo. De esta manera, es posible contrastar ambos resultados mediante las variables de tiempo con sus respectivos promedios y mediana, y a traves de la cantidad de casos con tiempo mayor a 15 segundos (los casos que pueden ocasionar falsos negativos). Hay que tener en consideración en la ejecución de todos los recuentos que si bien tiene un tiempo prolongado, tambien realiza un uso exhaustivo de memoria y, por ende, se debia limpiar cualquier fuga que pudiese existir entre cada uno de ellos de manera de permitir la normal ejecución sin saturar el servidor. Además, se descartaron las opciones de realizar una asignación inicial de los ramos con un candidato debido a que provocó desde un inicio resultados de mayor tiempo confirmando que ordenar los ramos de valor decreciente es la mejor opción, y la alternativa del cache debido a que si bien reducía en cierta cantidad el tiempo, este se veia perjudicado por el calculo del elemento identificador (hash) de cada estado.  

\begin{table}[!h]
	\centering
	\begin{tabular}{|c||c|c|c|c|c|c|}
		\hline
		\textbf{Carrera} & \textbf{Cantidad} & \textbf{Promedio} & \textbf{Elems. sobre 15s} & \textbf{Min} & \textbf{Max} & \textbf{Mediana}\\\hline\hline
		11 & 32 & 0,21984 & 0 & 0,01 & 1,243 & 0,075\\\hline
		124 & 94 & 2,3742 & 7 & 0,005 & - & 0,6965\\\hline
		14 & 175 & 0,3807 & 0 & 0,004 & 5,668 & 0,108\\\hline
		17 & 177 & 4,38622 & 38 & 0,001 & - & 0,223\\\hline
		25 & 191 & 5,12307 & 46 & 0,001 & - & 0,174\\\hline
		41 & 340 & 2,72421 & 33 & 0,001 & - & 0,0535\\\hline
		10 & 381 & 1,0309 & 2 & 0,006 & - & 0,037\\\hline
		22 & 390 & 0,82603 & 0 & 0,001 & 12,485 & 0,05\\\hline
		18 & 414 & 1,00994 & 8 & 0,001 & - & 0,337\\\hline
		15 & 484 & 2,6779 & 43 & 0,001 & - & 0,2\\\hline
		6 & 530 & 1,59584 & 16 & 0,001 & - & 0,141\\\hline
		16 & 1091 & 4,95989 & 297 & 0,001 & - & 15,007\\\hline
	\end{tabular}
	\caption{Tabla de resultados de la heuristica antigua}
	\label{tabla:2}
\end{table}

En la tabla \ref{tabla:2} se presentan los resultados de la ejecución de la heuristica antigua dividida por codigo de carrera. En los casos donde no se adiciona el tiempo maximo de ejecucion es debido a que existen elementos sobre los 15 segundos y, por lo tanto, no se posee un registro de aquel tiempo. Además, hay que considerar que los promedios estan reduciendo a 15 segundos los casos en que ese tiempo es mucho mayor, y por ende se ven reducidas las medias. Aun así se agrego el calculo de la mediana para evidenciar la tendencia del algoritmo en todos los casos.

\begin{table}[!h]
	\centering
	\begin{tabular}{|c||c|c|c|c|c|c|}
		\hline
		\textbf{Carrera} & \textbf{Cantidad} & \textbf{Promedio} & \textbf{Elems. sobre 15s} & \textbf{Min} & \textbf{Max} & \textbf{Mediana}\\\hline\hline
		11 & 32 & 0,03863 & 0 & 0,008 & 0,135 & 0,0205\\\hline
		124 & 94 & 0,28724 & 0 & 0,005 & 3,838 & 0,1125\\\hline
		14 & 175 & 0,05555 & 0 & 0,003 & 0,759 & 0,022\\\hline
		17 & 177 & 2,38323 & 8 & 0,001 & - & 0,076\\\hline
		25 & 191 & 2,26128 & 7 & 0,001 & - & 0,076\\\hline
		41 & 340 & 0,36677 & 0 & 0,001 & 7,459 & 0,0315\\\hline
		10 & 381 & 0,1577 & 1 & 0,003 & - & 0,011\\\hline
		22 & 390 & 0,05714 & 0 & 0,001 & 0,39 & 0,0155\\\hline
		18 & 414 & 0,23142 & 0 & 0,001 &  & 0,12\\\hline
		15 & 484 & 1,09025 & 7 & 0,001 & - & 0,085\\\hline
		6 & 530 & 0,30912 & 1 & 0,001 & - & 0,058\\\hline
		16 & 1091 & 3,94389 & 201 & 0,001 & - & 4,197\\\hline
	\end{tabular}
	\caption{Tabla de resultados del algoritmo nuevo}
	\label{tabla:3}
\end{table}


En cambio, en la tabla \ref{tabla:3}, se entregan los resultados para la ejecución del algoritmo nuevo. Si bien en estos casos se poseia un valor maximo para todos los casos se decidió normalizar los valores mayores a 15 segundos al igual que la heuristica antigua debido a la necesidad de que los promedios fueran comparables.

Las carreras fueron ordenadas por la cantidad de alumnos de manera creciente para ambos casos. Comparativamente ente las dos tablas se puede observan un gran avance con la implementación nueva reduciendo en 9 veces los promedios de tiempo en la mayoria de los casos a excepcion de la carrera Ingeniería Civil Industrial (código 16). 

Para poder explicar el comportamiento de la carrera Ingeniería Civil Industrial debemos acudir al grafo realizado en la sección ``Solución'' pero para el caso de este plan. En la figura \ref{grafo_industrias} se puede observar como se generan componentes conexas correctamente como el nuevo algoritmo predijo, aun así, si se compara con el grafo de la figura \ref{grafo_general}, se pueden evidenciar dos grandes diferencias. Primero, las conexiones de la componente conexa mas grande esta realizada por ramos que comparten todos los planes. Es decir, no existe diferenciación o discriminación entre los dos planes que estan en esa componente. Estos planes son ``Licenciatura Electivos Industrial'' y ``Ingeniería Civil Industrial v3, Electivos'', y si bien no necesariamente implica un mal modelamiento de los planes de los ramos ya que es una opcion viable dentro de todas las alternativas, como opinion personal se considera que pierde el sentido diferenciar en dos planes distintos algo que en la pratica no se diferencia perdiendo la oportunidad de, por ejemplo, aprovechar realizar planes con distintas profundidades académicas.

Por otra parte, la segunda razón por la cual el comportamiento en esa carrera es mas complejo para el algoritmo tiene que ver con el tamaño de la componente conexa mayor donde se observa cerca del doble de ramos complejizando el orden desde $3^{10}$ a $3^{20}$. La causa de esto es la cantidad de Unidades Docentes que poseen los ramos electivos en Industrias ya que poseen tan solo 5 UD's siendo lo normal de un ramo 10 UD's. Esto es debido a que sus ramos o poseen menor profundidad o son dictados con la misma exigencia que un ramo común pero en mitades de semestre construyendose periodos ficticios. Es decir, si bien el periodo academico de un semestre normal implica 15 semanas, estos cursos son dictados solo por 7 semanas ya sea desde el comienzo o iniciando retrasadamente desde la octava semana.

\begin{landscape}
	\begin{figure}[!h]
		\centering
		\includegraphics[scale=0.43]{imagenes/17}
		\caption{Grafo de un alumno de la carrera Ingeniería Civil Industrial.}
		\label{grafo_industrias}
	\end{figure}
\end{landscape}

Finalmente, si no se considera la carrera mencionada anteriormente se logró reducir en 10 veces la cantidad de elementos que son calculados en más de 15 segundos. Además, considerando la totalidad de elementos se logró encontrar 64 falsos negativos siendo el $25\%$ de los computos reducidos desde 15 segundos más, hacia un valor menor. Además, se encontró que cerca del $4\%$ de los candidatos a mejorar sus recuentos presentaba una nota mayor a la calculada y por ende, era probable que podria titularse con una nota mayor o, incluso, con una distinción superior.



